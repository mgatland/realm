<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>My first Three.js app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script src="js/net.js"></script>
		<script>

NET.connect();

var Environment = { GROUND_Y: 0, GROUND_WIDTH: 100, GROUND_LENGTH: 100}

var scene = new THREE.Scene();
var width = 30;
var height = 30;


//var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

var camera = new THREE.OrthographicCamera(
	width / -2, width / 2,
	height / 2, height / -2, 0.1, 1000 );

var renderer = new THREE.WebGLRenderer();
renderer.shadowMap.enabled = true;

renderer.setSize( window.innerWidth, window.innerHeight );
document.body.appendChild( renderer.domElement );

var geometry = new THREE.BoxGeometry( 1, 1, 1 );
var material = new THREE.MeshPhongMaterial( { color: 0x00ff00 } );
var cube = new THREE.Mesh( geometry, material );
cube.castShadow = true;
cube.position.y = 0.5;
cube.position.z = -1;
scene.add(cube);

var cube2 = cube.clone();
scene.add (cube2);
cube2.position.z += 2;

var cube3 = cube.clone();
scene.add (cube3);
cube3.scale.x = 0.5;
cube3.scale.y = 0.5;
cube3.scale.z = 0.5;
cube3.position.z += 3;
cube3.position.y = 0.5;

camera.position.z = 0;
camera.position.y = 11; //3 for perspective view
camera.rotation.x = -0.9;
camera.rotation.y = 0.1;

//   /|\ y
//    |
//    |_____x
//

//ground

texture = THREE.ImageUtils.loadTexture('images/sand.png');
texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
texture.repeat.set(30, 30);

var ground = new THREE.Mesh(
	new THREE.PlaneGeometry( Environment.GROUND_WIDTH, Environment.GROUND_LENGTH ),
	new THREE.MeshLambertMaterial(
		{ color: this.textureGround ? 0xffffff : 0xaaaaaa, map:texture }
	)
);
ground.receiveShadow = true;
ground.rotation.x = -Math.PI/2;
ground.position.y = Environment.GROUND_Y;
scene.add( ground );

var light = new THREE.DirectionalLight( 0xffffff, 0.5 );
light.position.set( -0.8, 1, -0 );
light.castShadow = true;
light.shadow.camera.right     =  5;
light.shadow.camera.left     = -5;
light.shadow.camera.top      =  5;
light.shadow.camera.bottom   = -5;
scene.add( light );

var ambLight = new THREE.AmbientLight( 0x404040);
scene.add(ambLight);

//

function render() {
	requestAnimationFrame( render );
	cube.rotation.y += 0.01;
	cube2.rotation.y -= 0.01;
	cube3.rotation.y += 0.01;
	renderer.render( scene, camera );
}
render();

		</script>
	</body>
</html>